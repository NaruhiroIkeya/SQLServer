PRINT '---CHECKDB for All Databases---'
DECLARE @STARTDATE datetime;
DECLARE @FINISHDATE datetime;

SET @STARTDATE = GETDATE();
PRINT '---START DATE & TIME---'
PRINT CONVERT(varchar,@STARTDATE,121);
EXEC sp_msforeachdb 'USE [?]; IF DB_Name() = ''Tempdb'' BEGIN RETURN END DBCC CHECKDB WITH MAXDOP = 24, PHYSICAL_ONLY'
IF @@ERROR = 0
  BEGIN
    PRINT 'return status = 0'
  END
ELSE
  BEGIN
    PRINT 'return status = 1'
  END
SET @FINISHDATE = GETDATE();
PRINT '---FINISH DATE & TIME---'
PRINT CONVERT(varchar,@FINISHDATE,121);
PRINT '---ELAPSED TIME---'
PRINT CONVERT(CHAR(12), DATEADD(SECOND, DATEDIFF(SECOND, @STARTDATE, @FINISHDATE), CONVERT(DATETIME, 0)), 108)
